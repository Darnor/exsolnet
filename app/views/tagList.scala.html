@import java.util
@(username: String, tags: util.List[Tag], trackedTags: util.List[Tag], currentOrderBy: Int, tagNameFilter: String)

@****************************************
* Helper generating navigation links    *
****************************************@
@link(newOrderBy: Int) = @{
    routes.TagController.renderTagList(newOrderBy, tagNameFilter)
}

@**********************************
* Helper generating table headers *
***********************************@
@header(columnId: Int, title: String) = {
    <th class="col@columnId header @if(Math.abs(currentOrderBy) == columnId) @{if(currentOrderBy == columnId) "headerSortDown" else "headerSortUp"}">
        <a href="@link(if (currentOrderBy == columnId) -columnId else columnId )">@title</a>
    </th>
}

@main("Welcome to Exsolnet"){

    <h1>Tags</h1>
    @helper.form(action=routes.TagController.renderTagList()) {
        <input type="hidden" name="sort" value="@currentOrderBy" />
        <input type="search" id="searchbox" name="tags" value="@tagNameFilter" placeholder="Tag-Filter"/>
        <input type="submit" id="searchsubmit" value="Suche" class="btn primary"/>
    }

    <table class="tags zebra-striped">
        <thead>
            <tr>
                @header(1, "Name")
                @header(2, "Aufgaben")
                @header(3, "Subscription")
            </tr>
        </thead>
        <tbody>

        @tags.map{ tag =>
            <tr>
                <td>
                @tag.getName
                </td>
                <td>
                @tag.getExercises.size
                </td>
                <td>
                    @helper.form(action=routes.TagController.processTrack(tag.getName)) {
                        <input type="hidden" name="tag" value="@tag.getName" />
                        <input type="submit" @if(trackedTags.contains(tag)) { value="Untrack" } else { value="Track" } class="btn track"/>
                    }
                </td>
            </tr>
        }
        </tbody>
    </table>
}