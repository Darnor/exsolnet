@(user: User, currentPage: com.avaje.ebean.PagedList[Exercise], currentOrderBy: Int, currentTitleFilter: String, currentTagFilter: String)

@****************************************
* Helper generating navigation links    *
****************************************@
@link(newPage: Int,newOrderBy: Int) = @{
    routes.ExerciseController.renderList(newPage, newOrderBy, currentTitleFilter, currentTagFilter)
}

@**********************************
* Helper generating table headers *
***********************************@
@header(orderBy: Int, title: String) = {
    <th class="col@orderBy header @if(currentOrderBy == orderBy) @{if(currentOrderBy == orderBy) "headerSortDown" else "headerSortUp"}">
        <a href="@link(0,if (currentOrderBy == orderBy) -orderBy else orderBy )">@title</a>
    </th>
}

@main("Aufgaben", user){
    <h1>Aufgaben Übersicht</h1>

    <script src="@routes.Assets.versioned("javascripts/jquery.tokeninput.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/exerciselist.js")" type="text/javascript"></script>
    <form method="GET" action="@routes.ExerciseController.renderList()" class="form-horizontal">
        <input type="hidden" name="sort" value="@currentOrderBy" />
        <input type="search" class="form-control" id="title-filter" name="title" value="@currentTitleFilter" placeholder="Titel-Filter"/>
        <p>Tag-Filter: </p>
        <input type="search" class="form-control" id="tag-filter-list" name="tags" value="@currentTagFilter" placeholder="Tag-Filter" data-route="@routes.TagController.suggestAllTags("")"/>
        <input type="submit" class="btn btn-primary btn-default" id="submit-filter" value="Suche" />
    </form>

    <table class="table table-striped">
        <thead class="thead-inverse">
            <tr>
                @header(1, "Titel")
                @header(2, "Lösungen")
                @header(3, "Bewertung")
                @header(4, "Datum")
            </tr>
        </thead>
        <tbody>

        @for(exercise <- currentPage.getList){
            <tr>
                <td>
                    <a href="@routes.ExerciseController.renderDetails(exercise.getId)">@exercise.getTitle</a>
                    <p>von <a>@exercise.getUser.getUsername</a>
                        @for(tag <- exercise.getTagsSortedByTagType){
                            @tag.getName,
                        }
                    </p>
                </td>
                <td class="text-center">
                @exercise.getSolutions.size
                </td>
                <td class="text-center">
                @exercise.getPoints
                </td>
                <td>
                @exercise.getTime().format(java.time.format.DateTimeFormatter.ofPattern("d MMM yyyy - hh:mm:ss"))
                </td>
            </tr>
        }
        </tbody>
    </table>

    <div id="pagination" class="pagination">
        <div>
            @if(currentPage.hasPrev){
                <div class="prev">
                    <a href="@link(currentPage.getPageIndex-1,currentOrderBy)">&larr; Vorherige</a>
                </div>
            }else {
                <div class="prev disabled">
                    <a>&larr; Vorherige</a>
                </div>
            }
        </div>
        <div>
            @if(currentPage.hasNext) {
                <div class="next">
                    <a href="@link(currentPage.getPageIndex+1, currentOrderBy)">Nächste &rarr;</a>
                </div>
            }else{
                <div class="next disabled">
                    <a>Nächste &rarr;</a>
                </div>
            }
        </div>
        <div class="current">
            <p>Zeige @currentPage.getDisplayXtoYofZ(" bis "," von ") an</p>
        </div>
    </div>
}